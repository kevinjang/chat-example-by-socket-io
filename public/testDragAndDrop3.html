<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body ondrop="drop(event)" ondragover="dragover(event)" ondropend="dropend(event)">
    <div id="largeCon" ondrop="drop(event)" ondragover="dragover(event)"
        style="width:100%;height:100%;background-color:orchid;">
        <!-- ondropend="dropend(event)" -->

        <div id="container" ondrop="drop(event)" ondragover="dragover1(event)" ondragend="dropend(event)"
            style="width: 200px; height: 200px;background-color: aqua;"></div>
        <div id="m" draggable="true" ondragstart="dragStart(event)"
            style="width: 100px; height: 100px;background-color: aquamarine;">
            <div style="width:25px;height:25px;background-color:orangered;margin: auto auto;padding: auto auto;"></div>
        </div>
    </div>
    <script>
        function drop(e) {
            e.preventDefault();
            var id = e.dataTransfer.getData('id');
            console.log('e.offsetX:', e.offsetX)
            console.log('before drop:', document.getElementById(id));
            document.querySelector('#' + e.target.id).setAttribute("style", `${document.querySelector('#' + e.target.id).style.cssText};left: ${e.offsetX}px;`);
            e.target.appendChild(document.getElementById(id));
            console.log('after drop:', document.getElementById(id));
        }

        function dragStart(e) {
            e.dataTransfer.setData('id', e.target.id);
            console.log('e.dataTransfer.getData("id"):', e.dataTransfer.getData("id"))
        }

        function dragover(e) {
            e.preventDefault();
            e.stopPropagation();
            return false;
            console.log(`dragover e:e.id:${e.dataTransfer.getData('id')}, mouse:`, e);
            // console.log(document.querySelector('#' + e.target.id).style.cssText)
            // document.getElementById(e.target.id).style.left = e.clientX;
            document.querySelector('#' + e.dataTransfer.getData('id')).setAttribute("style", `${document.querySelector('#' + e.dataTransfer.getData('id')).style.cssText};margin-left: ${e.offsetX}px;`);
            // document.getElementById(e.target.id).setAttribute("y", e.y)
            document.getElementById(e.target.id).style.top = e.clientY;
        }
        function dragover1(e) {
            e.preventDefault();
            e.stopPropagation();
            console.log(`dragover e:e.id:${e.dataTransfer.getData('id')}, mouse:`, e);
            // console.log(document.querySelector('#' + e.target.id).style.cssText)
            // document.getElementById(e.target.id).style.left = e.clientX;
            document.querySelector('#' + e.dataTransfer.getData('id')).setAttribute("style", `${document.querySelector('#' + e.dataTransfer.getData('id')).style.cssText};margin-left: ${e.offsetX}px;`);
            // document.getElementById(e.target.id).setAttribute("y", e.y)
            // document.getElementById(e.target.id).style.top = e.clientY;
        }


        function dropend(e) {
            e.preventDefault();
            // console.log(`dropend e:${e.x}_${e.y}, e.id:${e.target.id}`);
            // console.log('queryselector:', document.querySelector('#' + e.target.id));
            // document.getElementById(e.target.id).style.left = e.clientX;
            // document.getElementById(e.target.id).setAttribute("y", e.y)
            // document.getElementById(e.target.id).style.top = e.clientY;
        }
    </script>
</body>

</html>